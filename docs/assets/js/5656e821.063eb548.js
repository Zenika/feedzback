"use strict";(self.webpackChunkfeedzback_docs=self.webpackChunkfeedzback_docs||[]).push([[939],{3573:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>l});var s=t(4848),i=t(8453);const c={},r="i18n",o={id:"technical-guides/client/i18n",title:"i18n",description:"The localization uses the native Angular i18n feature.",source:"@site/docs/technical-guides/client/i18n.md",sourceDirName:"technical-guides/client",slug:"/technical-guides/client/i18n",permalink:"/feedzback/docs/technical-guides/client/i18n",draft:!1,unlisted:!1,editUrl:"https://github.com/Zenika/feedzback/tree/main/docs-source/docs/technical-guides/client/i18n.md",tags:[],version:"current",frontMatter:{},sidebar:"default",previous:{title:"Cookies",permalink:"/feedzback/docs/technical-guides/client/cookies"},next:{title:"Introduction",permalink:"/feedzback/docs/technical-guides/server/introduction"}},a={},l=[{value:"Be consistent with spaces",id:"be-consistent-with-spaces",level:2},{value:"Running the development server for the <code>en</code> locale",id:"running-the-development-server-for-the-en-locale",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"i18n",children:"i18n"}),"\n",(0,s.jsx)(n.p,{children:"The localization uses the native Angular i18n feature."}),"\n",(0,s.jsxs)(n.p,{children:["The app is written in ",(0,s.jsx)(n.strong,{children:"French"})," and translated into ",(0,s.jsx)(n.strong,{children:"English"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To generate the source file ",(0,s.jsx)(n.a,{href:"https://github.com/Zenika/feedzback/blob/main/client/src/locales/messages.fr.json",children:"src/locales/messages.fr.json"}),", run the following NPM script ",(0,s.jsx)(n.code,{children:"npm run extract-i18n"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Note the post-processing script ",(0,s.jsx)(n.code,{children:"postextract-i18n"}),", which sorts the translations alphabetically."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "extract-i18n": "ng extract-i18n --format json --output-path src/locales/ --out-file messages.fr.json",\n    "postextract-i18n": "node src/locales/sort-messages-fr-translations.js"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The target file ",(0,s.jsx)(n.a,{href:"https://github.com/Zenika/feedzback/blob/main/client/src/locales/messages.en.json",children:"src/locales/messages.en.json"})," was created and translated manually."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Don't forget to regenerate the source file every time you add or modify text in the source code.\nThen update the destination file accordingly."})}),"\n",(0,s.jsx)(n.h2,{id:"be-consistent-with-spaces",children:"Be consistent with spaces"}),"\n",(0,s.jsx)(n.p,{children:"When Angular generates the source file, some translations are surrounded by a space."}),"\n",(0,s.jsxs)(n.p,{children:["For example, in the file ",(0,s.jsx)(n.a,{href:"https://github.com/Zenika/feedzback/blob/feature/angular-18/client/src/app/give-feedback/give-requested-feedback/give-requested-feedback.component.html",children:(0,s.jsx)(n.code,{children:"give-requested-feedback.component.html"})}),", the text ",(0,s.jsx)(n.em,{children:'"Sauvegarder"'})," appears like this..."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<button\n  type="button"\n  [disabled]="submitInProgress"\n  mat-stroked-button\n  matTooltip="Enregistrer en tant que brouillon"\n  i18n-matTooltip="@@Action.SaveAsDraft"\n  i18n="@@Action.Save"\n  (click)="onDraft()"\n>\n  Sauvegarder\n</button>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["...and in the file ",(0,s.jsx)(n.a,{href:"https://github.com/Zenika/feedzback/blob/main/client/src/locales/messages.fr.json",children:"src/locales/messages.fr.json"}),", the translation appears like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "locale": "fr",\n  "translations": {\n    "Action.Save": " Sauvegarder "\n  }\n}\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["You must be consistent when the same text is used several times in the source code and preserve these spaces, otherwise the script ",(0,s.jsx)(n.code,{children:"npm run extract-i18n"})," will raise warnings."]})}),"\n",(0,s.jsxs)(n.h2,{id:"running-the-development-server-for-the-en-locale",children:["Running the development server for the ",(0,s.jsx)(n.code,{children:"en"})," locale"]}),"\n",(0,s.jsx)(n.p,{children:"As you probably know, the Angular development server does not support multiple locales\n(and the theme switcher button will do nothing in this environment)."}),"\n",(0,s.jsxs)(n.p,{children:["To run the development server for the ",(0,s.jsx)(n.code,{children:"en"})," locale, simply replace ",(0,s.jsx)(n.code,{children:'"fr"'})," with ",(0,s.jsx)(n.code,{children:'"en"'})," in the ",(0,s.jsx)(n.code,{children:"angular.json"})," configuration file\n(but do not commit this change to keep the French version as default locale)."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "projects": {\n    "client": {\n      "architect": {\n        "build": {\n          "configurations": {\n            "development": {\n              "localize": ["fr"] // \x3c!-- replace with "en"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(6540);const i={},c=s.createContext(i);function r(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);