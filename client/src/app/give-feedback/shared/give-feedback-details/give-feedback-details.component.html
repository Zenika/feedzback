<mat-form-field appearance="outline" class="gbl-form-field">
  <mat-label i18n="@@Feedback.Context">Contexte</mat-label>

  <textarea
    [formControl]="context()"
    [maxlength]="contextMaxLength"
    matInput
    rows="3"
    cdkTextareaAutosize
    cdkAutosizeMaxRows="10"
    placeholder="Dans quel contexte avez-vous travaillé avec votre collègue ?"
    i18n-placeholder="@@Component.GiveFeedbackDetails.ContextPlaceholder"
  ></textarea>

  <mat-hint align="end">{{ context().value.length }} / {{ contextMaxLength }}</mat-hint>
</mat-form-field>

<mat-form-field appearance="outline" class="gbl-form-field">
  <mat-label i18n="@@Feedback.Positive">Points forts</mat-label>

  <textarea
    [formControl]="positive()"
    [maxlength]="feedbackMaxLength"
    matInput
    rows="4"
    cdkTextareaAutosize
    cdkAutosizeMaxRows="25"
  ></textarea>

  <mat-hint align="start">
    <button
      type="button"
      class="gbl-button-less gbl-link gbl-link--no-underline"
      (click)="matDialog.open(positiveFeedbackGuide)"
    >
      <mat-icon class="me-1 align-text-bottom" style="font-size: 1.125rem">map</mat-icon>
      <ng-container i18n="@@Component.GiveFeedbackDetails.Guide">Guide</ng-container>
    </button>
  </mat-hint>

  <mat-hint align="end">{{ positive().value.length }} / {{ feedbackMaxLength }}</mat-hint>

  <mat-error>{{ positive().errors | validationErrorMessage }}</mat-error>
</mat-form-field>

<mat-form-field appearance="outline" class="gbl-form-field">
  <mat-label i18n="@@Feedback.Negative">Axes d'améliorations</mat-label>

  <textarea
    [formControl]="negative()"
    [maxlength]="feedbackMaxLength"
    matInput
    rows="4"
    cdkTextareaAutosize
    cdkAutosizeMaxRows="25"
  ></textarea>

  <mat-hint align="start">
    <button
      type="button"
      class="gbl-button-less gbl-link gbl-link--no-underline"
      (click)="matDialog.open(negativeFeedbackGuide)"
    >
      <mat-icon class="me-1 align-text-bottom" style="font-size: 1.125rem">map</mat-icon>
      <ng-container i18n="@@Component.GiveFeedbackDetails.Guide">Guide</ng-container>
    </button>
  </mat-hint>

  <mat-hint align="end">{{ negative().value.length }} / {{ feedbackMaxLength }}</mat-hint>

  <mat-error>{{ negative().errors | validationErrorMessage }}</mat-error>
</mat-form-field>

<mat-form-field appearance="outline" class="gbl-form-field">
  <mat-label i18n="@@Feedback.Comment">Commentaire</mat-label>

  <textarea
    [formControl]="comment()"
    [maxlength]="commentMaxLength"
    matInput
    rows="3"
    cdkTextareaAutosize
    cdkAutosizeMaxRows="10"
  ></textarea>

  <mat-hint align="end">{{ comment().value.length }} / {{ commentMaxLength }}</mat-hint>
</mat-form-field>

<ng-template #positiveFeedbackGuide>
  <div mat-dialog-title i18n="@@Feedback.Positive">Points forts</div>

  <app-positive-feedback-guide vertical mat-dialog-content />

  <mat-dialog-actions>
    <button mat-button mat-dialog-close i18n="@@Action.Close">Fermer</button>
  </mat-dialog-actions>
</ng-template>

<ng-template #negativeFeedbackGuide>
  <div mat-dialog-title i18n="@@Feedback.Negative">Axes d'améliorations</div>

  <app-negative-feedback-guide vertical mat-dialog-content />

  <mat-dialog-actions>
    <button mat-button mat-dialog-close i18n="@@Action.Close">Fermer</button>
  </mat-dialog-actions>
</ng-template>
