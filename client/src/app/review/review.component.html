@if (canReview) {
  <a class="gbl-link gbl-link--no-underline app-review" role="presentation" (click)="open()">
    <mat-icon>reviews</mat-icon>
    <ng-container> Donnez-nous notre avis</ng-container>
  </a>
}

<ng-template #reviewStep1>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2 mat-dialog-title i18n="@@Title.Review.Step1">Evaluez votre exp√©rience sur Feedzback.</h2>
    <div mat-dialog-content>
      <div class="app-review__sentiment-container">
        @for (iconSentiment of iconSentiments; track iconSentiment; let sentimentNote = $index) {
          <mat-icon
            class="material-symbols-outlined app-review__note"
            [ngClass]="{ 'app-review__note--selected': form.controls.note.value === sentimentNote + 1 }"
            (click)="chooseNote(sentimentNote + 1)"
            ><span>
              <span> {{ iconSentiment }}</span>
            </span>
          </mat-icon>
        }
      </div>
      @if (form.controls.note) {
        <div>
          <mat-form-field appearance="outline" class="gbl-form-field">
            <textarea
              matInput
              [formControl]="form.controls.comment"
              rows="3"
              placeholder="Dites-nous en plus..."
              i18n-placeholder="@@Component.ReviewComponent.Comment.Placeholder"
            ></textarea>
          </mat-form-field>
        </div>
      }
      <mat-dialog-actions align="end">
        <button
          mat-button
          [mat-dialog-close]="true"
          color="primary"
          cdkFocusInitial
          [disabled]="form.invalid"
          i18n="@@Action.Continue"
          (click)="onSubmit()"
        >
          Envoyer
        </button>
      </mat-dialog-actions>
    </div>
  </form>
</ng-template>
