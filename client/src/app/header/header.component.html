<div class="app-header__burger">
  @if (isKnownUser$ | async) {
    <app-burger class="app-header-menu-target" [(active)]="isMenuOpen"></app-burger>
  }
</div>

<div class="app-header__logo">
  <a routerLink="/home">
    <img src="/assets/images/logo-feedzback.svg" width="106" height="56" alt="" />
  </a>
</div>

<nav class="app-header-menu app-header-menu-target mat-body-strong" [class.app-header-menu--visible]="isMenuOpen">
  @if (isKnownUser$ | async) {
    <a class="app-header-menu__item" routerLinkActive="app-header-menu__item--active" routerLink="/home"> Accueil </a>
    <a class="app-header-menu__item" routerLinkActive="app-header-menu__item--active" routerLink="/request">
      Demander
    </a>
    <a class="app-header-menu__item" routerLinkActive="app-header-menu__item--active" routerLink="/give"> Donner </a>
    <a class="app-header-menu__item" routerLinkActive="app-header-menu__item--active" routerLink="/feedbacks">
      Mes feedZbacks
    </a>

    @if (hasManagerFeature && isManager()) {
      <a class="app-header-menu__item" routerLinkActive="app-header-menu__item--active" routerLink="/manager">
        Manager
      </a>
    }
  }
</nav>

<div class="app-header-account">
  @if (isSignedIn$ | async) {
    @if (photoUrl$ | async; as photoUrl) {
      <img
        [src]="photoUrl"
        [matMenuTriggerFor]="accountMenu"
        class="app-header-account__photo"
        height="48"
        width="48"
        alt="Profile photo"
      />
    } @else {
      <button mat-icon-button [matMenuTriggerFor]="accountMenu">
        <mat-icon color="primary">more_vert</mat-icon>
      </button>
    }

    <mat-menu #accountMenu="matMenu" xPosition="before">
      @if (hasLocalizeFeature && switchLanguageService.currentLanguage) {
        <button mat-menu-item (click)="switchLanguageService.switchLanguage()">
          <mat-icon color="primary">translate</mat-icon>
          @switch (switchLanguageService.currentLanguage) {
            @case ('fr') {
              English
            }
            @case ('en') {
              Français
            }
          }
        </button>
      }

      @if (hasManagerFeature && (isKnownUser$ | async)) {
        <button mat-menu-item routerLink="/settings">
          <mat-icon color="primary">settings</mat-icon>
          Paramètres
        </button>
      }

      <button mat-menu-item (click)="signOut()">
        <mat-icon color="primary">logout</mat-icon>
        @if (isKnownUser$ | async) {
          Se déconnecter
        } @else {
          Fermer la session
        }
      </button>
    </mat-menu>
  }
</div>
