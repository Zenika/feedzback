<h1 class="gbl-page-title">
  @switch (type) {
    @case (feedbackType.sentRequest) {
      <mat-icon>schedule</mat-icon>
      <ng-container i18n="@@Title.RequestedFeedback">FeedZback demandé</ng-container>
    }
    @case (feedbackType.receivedRequest) {
      <mat-icon>comment</mat-icon>
      <ng-container i18n="@@Title.FeedbackToGive">FeedZback à donner</ng-container>
    }
  }
</h1>

<div class="app-pending-feedback-list">
  <div class="app-pending-feedback-list__item"><mat-icon>email</mat-icon>{{ getColleagueEmail(feedback) }}</div>
  <div class="app-pending-feedback-list__item"><mat-icon>calendar_today</mat-icon>{{ feedback.createdAt | date }}</div>
</div>

<app-feedback-body [feedback]="feedback" />

@if (feedback.shared) {
  <div class="app-pending-feedback-list">
    <div class="app-pending-feedback-list__item">
      <mat-icon>share</mat-icon>
      @if (type === feedbackType.sentRequest) {
        <ng-container i18n="@@Message.FeedbackIsSharedWithYourManager">
          Ce feedZback est partagé avec votre manager
        </ng-container>
      } @else {
        <ng-container i18n="@@Message.FeedbackIsSharedWithTheManagerOfYourColleague">
          Ce feedZback est partagé avec le manager de votre collègue
        </ng-container>
      }
    </div>
  </div>
}

@switch (type) {
  @case (feedbackType.sentRequest) {
    @if (feedback.updatedAt > feedback.createdAt) {
      <div class="app-pending-feedback-list">
        <div class="app-pending-feedback-list__item">
          <mat-icon>history</mat-icon>
          <ng-container i18n="@@Component.PendingFeedback.ReminderAlreadySentOn">
            Vous avez déjà relancé votre collègue le
          </ng-container>
          {{ feedback.updatedAt | date }}
        </div>
      </div>
    }

    @if (showRequestAgainSuccess) {
      <app-message type="success" [visible]="showRequestAgainSuccess" i18n="@@Component.PendingFeedback.ReminderSent">
        Un rappel a été envoyé à votre collègue.
      </app-message>
    } @else {
      <button mat-raised-button color="primary" (click)="requestAgain()" i18n="@@Component.PendingFeedback.Remind">
        Relancer
      </button>
    }
  }
  @case (feedbackType.receivedRequest) {
    <button mat-raised-button color="primary" [appGiveRequestedFeedback]="this.feedback.id">
      <ng-container i18n="@@Feedback.Give"> Donner </ng-container>
    </button>
  }
}
